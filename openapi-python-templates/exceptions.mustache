from typing import Any, Optional

from fastapi import HTTPException
from httpx import Response


class ApiException(HTTPException):
    """Base class"""


class UnexpectedResponse(ApiException):
    def __init__(self, status_code: Optional[int], detail: Any = None, headers: dict = None) -> None:
        super().__init__(status_code=status_code, detail=detail, headers=headers)

    @staticmethod
    def for_response(response: Response) -> "ApiException":
        return UnexpectedResponse(response.status_code, response.text)


class ResponseHandlingException(ApiException):
    def __init__(self, source: Exception):
        self.source = source
